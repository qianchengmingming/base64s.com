<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Base64 åœ¨çº¿ç¼–ç è§£ç  | Base64 åŠ å¯†è§£å¯† - Base64.us</title>
    <link rel="icon" href="./static/images/logo.svg" type="image/png">
    <meta name="keywords" content="Base64,Base64ç¼–ç ,Base64è§£ç ,Base64åŠ å¯†,Base64è§£å¯†">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>

<body>
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container container-fluid">
            <a class="navbar-brand" href="#">
                <img src="./static/images/logo.svg" alt="Logo" width="30" height="24"
                    class="d-inline-block align-text-top">
                base64<span style="color: rgb(123 18 249);"><b>s</b></span>.com
            </a>
            <!-- ç§»åŠ¨ç«¯æ±‰å ¡èœå•æŒ‰é’® -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" 
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#">æ–‡å­—ç¼–ç </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">å›¾ç‰‡ç¼–ç </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">æ–‡ä»¶ç¼–ç </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">ç½‘é¡µç¼–ç </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            å¸¸è§é—®é¢˜
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">å¯†ç å¦‚ä½•é˜²æ­¢ç ´è§£?</a></li>
                            <li><a class="dropdown-item" href="#">å¦‚ä½•ä½¿ç”¨æ­¤ç½‘ç«™?</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">å…³äºæˆ‘ä»¬</a>
                    </li>
                </ul>
                <div class="d-flex navbar-buttons">
                    <!-- è¯­è¨€é€‰æ‹©æŒ‰é’® -->
                    <div class="dropdown me-2">
                        <button class="btn btn-outline-secondary dropdown-toggle btn-sm" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            ğŸŒ ä¸­æ–‡
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#">ğŸ‡ºğŸ‡¸ English</a></li>
                            <li><a class="dropdown-item" href="#">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</a></li>
                        </ul>
                    </div>
                    <!-- è®¾ç½®æŒ‰é’® -->
                    <button class="btn btn-outline-secondary btn-sm" type="button" data-bs-toggle="modal"
                        data-bs-target="#settingsModal">
                        âš™ï¸ è®¾ç½®
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- å†…å®¹åŒº -->
    <div class="container text-center" style="margin-top: 20px;margin-bottom: 20px;">
        <div class="row textarea-container">
            <div class="col input-section">
                <p class="fw-lighter text-start">è¯·è¾“å…¥è¦è¿›è¡Œ Base64 ç¼–ç æˆ–è§£ç çš„å­—ç¬¦: </p>
                <div class="position-relative">
                    <textarea id="inputText" class="code-input" placeholder="è¯·è¾“å…¥è¦ç¼–ç æˆ–è§£ç çš„å†…å®¹..."
                        aria-label="Text input with checkbox"></textarea>
                    <div class="position-absolute top-0 end-0 p-2">
                        <button type="button" class="btn clear-btn" style="padding:0 5px;" title="æ¸…ç©º"
                            onclick="clearText('inputText')">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ç§»åŠ¨ç«¯æ“ä½œæŒ‰é’®åŒºåŸŸ -->
            <div class="col-12 mobile-buttons" style="margin: 0;padding: 0;">
                <div class="d-flex justify-content-center gap-2 my-3">
                    <button type="button" class="btn btn-primary encode-btn" onclick="encodeText()"
                        style="width: 100px;">
                        <i class="bi bi-lightbulb-fill"></i>
                        ç¼–ç 
                    </button>
                    <button type="button" class="btn btn-info decode-btn" style="width: 100px;" onclick="decodeText()">
                        <i class="bi bi-lightbulb-off"></i>
                        è§£ç 
                    </button>
                    <button type="button" class="btn btn-secondary swap-btn" style="width: 100px;">
                        <i class="bi bi-repeat"></i>
                        äº¤æ¢
                    </button>
                </div>
            </div>

            <div class="col output-section">
                <p class="fw-lighter text-start">Base64 ç¼–ç æˆ–è§£ç çš„ç»“æœ: </p>
                <div class="position-relative">
                    <textarea id="outputText" class="code-input" placeholder="ç¼–ç æˆ–è§£ç ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."
                        aria-label="Text input with checkbox"></textarea>
                    <div class="position-absolute top-0 end-0 p-2">
                        <button type="button" class="btn clear-btn" style="padding:0 5px;" title="æ¸…ç©º"
                            onclick="clearText('outputText')">
                            <i class="bi bi-x-lg"></i>
                        </button>
                    </div>
                    <div class="position-absolute bottom-0 p-2" style="right: 20px;">
                        <button type="button" class="btn copy-btn" style="padding:0 5px;" title="æ‹·è´"
                            onclick="copyToClipboard('outputText')">
                            <i class="bi bi-intersect"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¡Œé¢ç«¯æ“ä½œæŒ‰é’® -->
    <div class="container desktop-buttons">
        <button type="button" class="btn btn-primary encode-btn" onclick="encodeText()" style="width: 120px;">
            <i class="bi bi-lightbulb-fill"></i>
            ç¼–ç 
        </button>
        <button type="button" class="btn btn-info decode-btn" style="width: 120px;" onclick="decodeText()">
            <i class="bi bi-lightbulb-off"></i>
            è§£ç 
        </button>
        <button type="button" class="btn btn-secondary swap-btn" style="width: 120px;">
            <i class="bi bi-repeat"></i>
            äº¤æ¢
        </button>
    </div>
    <div class="container" style="margin-top: 20px;">
        <div id="alertMessage" class="alert alert-info" role="alert" style="display: none;">
            è¯·åœ¨ä¸Šæ–¹ç¬¬ä¸€ä¸ªæ–‡æœ¬æ¡†ä¸­è¾“å…¥è¦ç¼–ç /è§£ç çš„å­—ç¬¦ã€‚
        </div>
    </div>

    <!-- è®¾ç½®ç”¨æˆ·çš„å¸¸ç”¨æ“ä½œ -->
    <div class="container">
        <hr>
        <!-- ä½¿ç”¨flexboxå®ç°è‡ªé€‚åº”å¸ƒå±€ -->
        <div class="d-flex flex-wrap gap-3 align-items-end">
            <!-- è‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸² -->
            <div class="flex-shrink-0" style="min-width: 300px;">
                <label class="form-label small">è‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸²</label>
                <div class="input-group">
                    <input type="text" id="autoAddString" class="form-control" placeholder="æœ€å¤š100ä¸ªå­—ç¬¦" maxlength="100"
                        data-bs-toggle="tooltip" data-bs-placement="top" title="ç¼–ç æ—¶è‡ªåŠ¨æ·»åŠ æ­¤å­—ç¬¦ä¸²ï¼Œè§£ç æ—¶è‡ªåŠ¨ç§»é™¤ã€‚ç”¨äºé˜²æ­¢å†…å®¹è¢«è½»æ˜“è¯†åˆ«ã€‚">
                    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="positionDropdown"
                        data-bs-toggle="dropdown" aria-expanded="false" data-bs-tooltip="tooltip"
                        data-bs-placement="top" title="é€‰æ‹©å­—ç¬¦ä¸²æ’å…¥çš„ä½ç½®">
                        <span id="currentPosition">éšæœºä½ç½®</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item position-option" href="#" data-value="random">éšæœºä½ç½®</a></li>
                        <li><a class="dropdown-item position-option" href="#" data-value="start">åœ¨å¼€å¤´æ·»åŠ </a></li>
                        <li><a class="dropdown-item position-option" href="#" data-value="end">åœ¨ç»“å°¾æ·»åŠ </a></li>
                        <li><a class="dropdown-item position-option" href="#" data-value="random-edge">éšæœºåœ¨å¼€å¤´æˆ–ç»“å°¾</a></li>
                    </ul>
                </div>
            </div>

            <!-- ç¼–ç æ¬¡æ•° -->
            <div class="flex-shrink-0" style="min-width: 10px;">
                <label class="form-label small">ç¼–ç æ¬¡æ•°</label>
                <input type="number" id="encodeCount" class="form-control" value="1" min="1" max="100"
                    data-bs-toggle="tooltip" data-bs-placement="top" title="è®¾ç½®Base64ç¼–ç çš„æ¬¡æ•°ï¼Œå¤šæ¬¡ç¼–ç å¯å¢å¼ºå®‰å…¨æ€§ã€‚å»ºè®®1-10æ¬¡ã€‚">
            </div>

            <!-- è‡ªåŠ¨å¤åˆ¶ç»“æœå¼€å…³ -->
            <div class="flex-shrink-0">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="autoCopyResult" checked
                        data-bs-toggle="tooltip" data-bs-placement="top" title="å¼€å¯åï¼Œç¼–ç /è§£ç å®Œæˆæ—¶è‡ªåŠ¨å¤åˆ¶ç»“æœåˆ°å‰ªè´´æ¿ï¼Œæ— éœ€æ‰‹åŠ¨ç‚¹å‡»å¤åˆ¶æŒ‰é’®ã€‚">
                    <label class="form-check-label small" for="autoCopyResult">è‡ªåŠ¨å¤åˆ¶ç»“æœ</label>
                </div>
            </div>

            <!-- è‡ªåŠ¨ç¼–è§£ç å¼€å…³ -->
            <div class="flex-shrink-0">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" id="autoDetectSwitch" checked
                        data-bs-toggle="tooltip" data-bs-placement="top" title="å¼€å¯åï¼Œè¾“å…¥å†…å®¹æ—¶è‡ªåŠ¨æ£€æµ‹æ˜¯å¦ä¸ºBase64å¹¶è¿›è¡Œç›¸åº”çš„ç¼–ç æˆ–è§£ç æ“ä½œã€‚">
                    <label class="form-check-label small" for="autoDetectSwitch">è‡ªåŠ¨ç¼–è§£ç </label>
                </div>
            </div>
        </div>
    </div>

    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="settingsModalLabel">âš™ï¸ ç³»ç»Ÿè®¾ç½®</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <!-- å¸¸ç”¨æ“ä½œè®¾ç½® -->
                        <div class="mb-3">
                            <!-- è‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸²è®¾ç½® -->
                            <div class="mb-2">
                                <label class="form-label small">è‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸²</label>
                                <div class="input-group mb-2">
                                    <input type="text" id="modalAutoAddString" class="form-control"
                                        placeholder="æœ€å¤š100ä¸ªå­—ç¬¦" maxlength="100" data-bs-toggle="tooltip"
                                        title="ç¼–ç æ—¶è‡ªåŠ¨æ·»åŠ æ­¤å­—ç¬¦ä¸²ï¼Œè§£ç æ—¶è‡ªåŠ¨ç§»é™¤ã€‚ç”¨äºé˜²æ­¢å†…å®¹è¢«è½»æ˜“è¯†åˆ«ã€‚">
                                </div>
                                <select class="form-select form-select-sm" id="modalAddPosition">
                                    <option value="random">éšæœºä½ç½®</option>
                                    <option value="start">åœ¨å¼€å¤´æ·»åŠ </option>
                                    <option value="end">åœ¨ç»“å°¾æ·»åŠ </option>
                                    <option value="random-edge">éšæœºåœ¨å¼€å¤´æˆ–ç»“å°¾</option>
                                </select>
                            </div>

                            <!-- ç¼–ç æ¬¡æ•°è®¾ç½® -->
                            <div class="mb-2">
                                <label class="form-label small">ç¼–ç æ¬¡æ•°</label>
                                <input type="number" id="modalEncodeCount" class="form-control" value="1" min="1"
                                    max="10" data-bs-toggle="tooltip" title="è®¾ç½®Base64ç¼–ç çš„æ¬¡æ•°ï¼Œå¤šæ¬¡ç¼–ç å¯å¢å¼ºå®‰å…¨æ€§ã€‚å»ºè®®1-3æ¬¡ã€‚">
                            </div>

                            <!-- å¼€å…³è®¾ç½® -->
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="modalAutoCopyResult" checked>
                                <label class="form-check-label" for="modalAutoCopyResult" data-bs-toggle="tooltip"
                                    title="å¼€å¯åï¼Œç¼–ç /è§£ç å®Œæˆæ—¶è‡ªåŠ¨å¤åˆ¶ç»“æœåˆ°å‰ªè´´æ¿">
                                    è‡ªåŠ¨å¤åˆ¶ç»“æœ
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="modalAutoDetectSwitch" checked>
                                <label class="form-check-label" for="modalAutoDetectSwitch" data-bs-toggle="tooltip"
                                    title="å¼€å¯åï¼Œè¾“å…¥å†…å®¹æ—¶è‡ªåŠ¨æ£€æµ‹æ˜¯å¦ä¸ºBase64å¹¶è¿›è¡Œç›¸åº”çš„ç¼–ç æˆ–è§£ç æ“ä½œ">
                                    è‡ªåŠ¨ç¼–è§£ç 
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å–æ¶ˆ</button>
                    <button type="button" class="btn btn-primary" onclick="saveSettings()">ä¿å­˜è®¾ç½®</button>
                </div>
            </div>
        </div>
    </div>



    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <script>
        // å…¨å±€å˜é‡å­˜å‚¨è®¾ç½®
        let settings = {
            autoEncode: true,
            autoDetect: true,
            insertRandomChar: false,
            showLineNumbers: false,
            wordWrap: true,
            enableNotifications: true,
            enableSound: false,
            fontSize: '12',
            // æ–°å¢çš„å¸¸ç”¨æ“ä½œè®¾ç½®
            autoAddString: '',      // è‡ªåŠ¨æ·»åŠ çš„å­—ç¬¦ä¸²
            addPosition: 'random',  // æ·»åŠ ä½ç½®ï¼šrandom, start, end, random-edge
            encodeCount: 1,         // ç¼–ç æ¬¡æ•°
            autoCopyResult: true,   // è‡ªåŠ¨å¤åˆ¶ç»“æœ
            autoDetectSwitch: true  // è‡ªåŠ¨ç¼–è§£ç å¼€å…³
        };

        // ç”¨äºæ ‡è¯†æ˜¯å¦æ˜¯äº¤æ¢æ“ä½œè§¦å‘çš„è¾“å…¥å˜åŒ–
        let isSwapTriggered = false;

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function () {
            loadSettings();
            setupEventListeners();
            initializeTooltips();
            setupCommonOperations();
            // showAlert('è¯·åœ¨ä¸Šæ–¹ç¬¬ä¸€ä¸ªæ–‡æœ¬æ¡†ä¸­è¾“å…¥è¦ç¼–ç /è§£ç çš„å­—ç¬¦ã€‚', 'info');

            // è°ƒè¯•ï¼šæ˜¾ç¤ºå½“å‰è®¾ç½®çŠ¶æ€
            console.log('è‡ªåŠ¨æ£€æµ‹è®¾ç½®:', settings.autoDetect);

            // ç¡®ä¿å‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å¯ç”¨
            window.encodeText = encodeText;
            window.decodeText = decodeText;
            window.swapText = swapText;
            window.clearText = clearText;
            window.copyToClipboard = copyToClipboard;


        });

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ - ä¸ºå„ç§ç”¨æˆ·äº¤äº’ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°
        function setupEventListeners() {
            // è¾“å…¥æ¡†å†…å®¹å˜åŒ–äº‹ä»¶ç›‘å¬ - å½“ç”¨æˆ·åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å†…å®¹æ—¶è‡ªåŠ¨è§¦å‘æ£€æµ‹
            $('#inputText').on('input', function () {
                // åªæœ‰åœ¨å¯ç”¨è‡ªåŠ¨æ£€æµ‹ä¸”ä¸æ˜¯äº¤æ¢æ“ä½œè§¦å‘çš„æƒ…å†µä¸‹æ‰è¿›è¡Œè‡ªåŠ¨å¤„ç†
                // ä½¿ç”¨æ–°çš„autoDetectSwitchå¼€å…³æ¥æ§åˆ¶è‡ªåŠ¨ç¼–è§£ç 
                if (settings.autoDetectSwitch && !isSwapTriggered) {
                    autoDetectAndProcess();
                }
            });

            // æ’å…¥å­—ç¬¦è¾“å…¥æ¡†å˜åŒ–ç›‘å¬ - ç”¨äºéšæœºå­—ç¬¦æ’å…¥åŠŸèƒ½
            $('#insertChar').on('input', function () {
                // å¦‚æœç”¨æˆ·è¾“å…¥äº†æ’å…¥å­—ç¬¦ä¸”å¯ç”¨äº†éšæœºæ’å…¥åŠŸèƒ½
                if ($(this).val() && settings.insertRandomChar) {
                    settings.insertRandomChar = true;
                    saveSettings(); // ä¿å­˜è®¾ç½®åˆ°æœ¬åœ°å­˜å‚¨
                }
            });

            // ç²˜è´´äº‹ä»¶ç›‘å¬ - å¤„ç†ç”¨æˆ·ç²˜è´´å†…å®¹åˆ°è¾“å…¥æ¡†çš„æƒ…å†µ
            $('#inputText').on('paste', function (e) {
                // å»¶è¿Ÿ100æ¯«ç§’æ‰§è¡Œï¼Œç¡®ä¿ç²˜è´´å†…å®¹å·²ç»å¡«å…¥è¾“å…¥æ¡†
                setTimeout(() => {
                    // æ£€æŸ¥æ˜¯å¦å¯ç”¨è‡ªåŠ¨æ£€æµ‹ä¸”ä¸æ˜¯äº¤æ¢æ“ä½œè§¦å‘çš„
                    // ä½¿ç”¨æ–°çš„autoDetectSwitchå¼€å…³æ¥æ§åˆ¶è‡ªåŠ¨ç¼–è§£ç 
                    if (settings.autoDetectSwitch && !isSwapTriggered) {
                        autoDetectAndProcess();
                    }
                }, 100);
            });

            // è®¾ç½®å„ä¸ªæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°
            $('.encode-btn').on('click', encodeText);    // ç¼–ç æŒ‰é’®
            $('.decode-btn').on('click', decodeText);    // è§£ç æŒ‰é’®
            $('.swap-btn').on('click', swapText);        // äº¤æ¢æŒ‰é’®
        }

        // åˆå§‹åŒ–Bootstrapæç¤ºæ¡† - ä¸ºæ‰€æœ‰å¸¦æœ‰tooltipå±æ€§çš„å…ƒç´ å¯ç”¨æç¤ºåŠŸèƒ½
        function initializeTooltips() {
            // åˆå§‹åŒ–æ‰€æœ‰tooltip
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        }

        // è®¾ç½®å¸¸ç”¨æ“ä½œåŠŸèƒ½ - åˆå§‹åŒ–å¸¸ç”¨æ“ä½œåŒºåŸŸçš„æ‰€æœ‰åŠŸèƒ½å’Œäº‹ä»¶ç›‘å¬
        function setupCommonOperations() {
            // è‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸²é•¿åº¦è®¡æ•°æ›´æ–°
            $('#autoAddString').on('input', function () {
                const length = $(this).val().length;
                $('#addStringCount').text(length);
                settings.autoAddString = $(this).val();
                saveSettingsToStorage();
            });

            // ä½ç½®é€‰æ‹©ä¸‹æ‹‰èœå•äº‹ä»¶
            $('.position-option').on('click', function (e) {
                e.preventDefault();
                const value = $(this).data('value');
                const text = $(this).text();
                $('#currentPosition').text(text);
                settings.addPosition = value;
                saveSettingsToStorage();
            });

            // ç¼–ç æ¬¡æ•°è¾“å…¥æ¡†äº‹ä»¶
            $('#encodeCount').on('change', function () {
                const count = parseInt($(this).val());
                if (count >= 1 && count <= 10) {
                    settings.encodeCount = count;
                    saveSettingsToStorage();
                } else {
                    $(this).val(settings.encodeCount);
                    showAlert('ç¼–ç æ¬¡æ•°å¿…é¡»åœ¨1-10ä¹‹é—´', 'warning');
                }
            });

            // è‡ªåŠ¨å¤åˆ¶ç»“æœå¼€å…³
            $('#autoCopyResult').on('change', function () {
                settings.autoCopyResult = $(this).is(':checked');
                saveSettingsToStorage();
            });

            // è‡ªåŠ¨ç¼–è§£ç å¼€å…³ - åŒæ­¥åˆ°åŸæœ‰çš„è‡ªåŠ¨æ£€æµ‹è®¾ç½®
            $('#autoDetectSwitch').on('change', function () {
                const enabled = $(this).is(':checked');
                settings.autoDetectSwitch = enabled;
                settings.autoDetect = enabled; // åŒæ­¥åˆ°åŸæœ‰è®¾ç½®
                $('#autoDetect').prop('checked', enabled); // åŒæ­¥UI
                saveSettingsToStorage();
            });

            // åŒæ­¥è®¾ç½®å¼¹æ¡†ä¸­çš„æ§ä»¶
            setupModalSync();
        }

        // è®¾ç½®å¼¹æ¡†åŒæ­¥åŠŸèƒ½ - ç¡®ä¿è®¾ç½®å¼¹æ¡†ä¸­çš„æ§ä»¶ä¸ä¸»ç•Œé¢ä¿æŒåŒæ­¥
        function setupModalSync() {
            // æ¨¡æ€æ¡†ä¸­çš„è‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸²
            $('#modalAutoAddString').on('input', function () {
                const value = $(this).val();
                $('#autoAddString').val(value);
                $('#addStringCount').text(value.length);
                settings.autoAddString = value;
                saveSettingsToStorage();
            });

            // æ¨¡æ€æ¡†ä¸­çš„ä½ç½®é€‰æ‹©
            $('#modalAddPosition').on('change', function () {
                const value = $(this).val();
                const text = $(this).find('option:selected').text();
                $('#currentPosition').text(text);
                settings.addPosition = value;
                saveSettingsToStorage();
            });

            // æ¨¡æ€æ¡†ä¸­çš„ç¼–ç æ¬¡æ•°
            $('#modalEncodeCount').on('change', function () {
                const count = parseInt($(this).val());
                if (count >= 1 && count <= 10) {
                    $('#encodeCount').val(count);
                    settings.encodeCount = count;
                    saveSettingsToStorage();
                } else {
                    $(this).val(settings.encodeCount);
                }
            });

            // æ¨¡æ€æ¡†ä¸­çš„è‡ªåŠ¨å¤åˆ¶å¼€å…³
            $('#modalAutoCopyResult').on('change', function () {
                const enabled = $(this).is(':checked');
                $('#autoCopyResult').prop('checked', enabled);
                settings.autoCopyResult = enabled;
                saveSettingsToStorage();
            });

            // æ¨¡æ€æ¡†ä¸­çš„è‡ªåŠ¨ç¼–è§£ç å¼€å…³
            $('#modalAutoDetectSwitch').on('change', function () {
                const enabled = $(this).is(':checked');
                $('#autoDetectSwitch').prop('checked', enabled);
                settings.autoDetectSwitch = enabled;
                settings.autoDetect = enabled; // åŒæ­¥åˆ°åŸæœ‰è®¾ç½®
                $('#autoDetect').prop('checked', enabled);
                saveSettingsToStorage();
            });
        }

        // è‡ªåŠ¨æ£€æµ‹å¹¶å¤„ç†ç¼–ç /è§£ç åŠŸèƒ½ - æ ¹æ®è¾“å…¥å†…å®¹æ™ºèƒ½åˆ¤æ–­æ˜¯å¦éœ€è¦ç¼–ç æˆ–è§£ç 
        function autoDetectAndProcess() {
            // å…³é”®ä¿®å¤ï¼šå¦‚æœæ˜¯äº¤æ¢æ“ä½œè§¦å‘çš„è¾“å…¥å˜åŒ–ï¼Œè·³è¿‡è‡ªåŠ¨å¤„ç†
            // è¿™ç¡®ä¿äº†äº¤æ¢åŠŸèƒ½ä¸ä¼šè§¦å‘æ„å¤–çš„ç¼–ç /è§£ç æ“ä½œ
            if (isSwapTriggered) {
                console.log('äº¤æ¢æ“ä½œè§¦å‘ï¼Œè·³è¿‡è‡ªåŠ¨æ£€æµ‹å¤„ç†');
                isSwapTriggered = false; // é‡ç½®æ ‡å¿—ï¼Œä¸ºä¸‹æ¬¡æ“ä½œåšå‡†å¤‡
                return;
            }

            // è·å–è¾“å…¥æ¡†ä¸­çš„æ–‡æœ¬å†…å®¹å¹¶å»é™¤é¦–å°¾ç©ºæ ¼
            const text = $('#inputText').val().trim();

            // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œæ¸…ç©ºè¾“å‡ºæ¡†
            if (!text) {
                clearOutput();
                return;
            }

            // è°ƒè¯•ä¿¡æ¯ï¼šæ˜¾ç¤ºæ£€æµ‹è¿‡ç¨‹ï¼Œä¾¿äºå¼€å‘è€…è°ƒè¯•
            console.log('è‡ªåŠ¨æ£€æµ‹è¾“å…¥:', text);
            console.log('æ˜¯å¦ä¸ºBase64:', isBase64(text));

            // æ™ºèƒ½æ£€æµ‹è¾“å…¥å†…å®¹çš„ç±»å‹ï¼šBase64ç¼–ç  vs æ™®é€šæ–‡æœ¬
            if (isBase64(text)) {
                // å¦‚æœæ£€æµ‹åˆ°æ˜¯Base64ç¼–ç ï¼Œæ‰§è¡Œè‡ªåŠ¨è§£ç 
                console.log('æ£€æµ‹åˆ°Base64ç¼–ç ï¼Œæ‰§è¡Œè‡ªåŠ¨è§£ç ');
                autoDecode();
            } else {
                // å¦‚æœä¸æ˜¯Base64ç¼–ç ï¼Œæ‰§è¡Œè‡ªåŠ¨ç¼–ç 
                console.log('ä¸æ˜¯Base64ï¼Œæ‰§è¡Œè‡ªåŠ¨ç¼–ç ');
                autoEncode();
            }
        }

        // æ£€æŸ¥æ˜¯å¦ä¸ºBase64ç¼–ç 
        function isBase64(str) {
            // ç§»é™¤å¯èƒ½çš„ç©ºç™½å­—ç¬¦
            str = str.replace(/\s/g, '');

            // ç©ºå­—ç¬¦ä¸²ä¸æ˜¯Base64
            if (!str) {
                return false;
            }

            // Base64å­—ç¬¦ä¸²é•¿åº¦å¿…é¡»æ˜¯4çš„å€æ•°
            if (str.length % 4 !== 0) {
                return false;
            }

            // æ£€æŸ¥æ˜¯å¦åªåŒ…å«Base64å­—ç¬¦
            const base64Regex = /^[A-Za-z0-9+/]*={0,2}$/;
            if (!base64Regex.test(str)) {
                return false;
            }

            // å°è¯•è§£ç éªŒè¯
            try {
                atob(str);
                return true;
            } catch (err) {
                return false;
            }
        }

        // æ£€æŸ¥æ˜¯å¦ä¸ºå¯è¯»æ–‡æœ¬
        function isReadableText(str) {
            // æ£€æŸ¥æ˜¯å¦åŒ…å«å¯è¯»å­—ç¬¦
            const readableChars = str.match(/[a-zA-Z0-9\u4e00-\u9fa5\s.,!?;:'"()[\]{}]/g);
            return readableChars && readableChars.length > str.length * 0.3;
        }

        // å®‰å…¨çš„ä¸­æ–‡Base64è§£ç å‡½æ•°
        function safeBase64Decode(str) {
            try {
                // é¦–å…ˆå°è¯•ç›´æ¥è§£ç 
                const binaryString = atob(str);

                // å°è¯•ä½¿ç”¨TextDecoderè§£ç ï¼ˆæ”¯æŒUTF-8ï¼‰
                if (typeof TextDecoder !== 'undefined') {
                    const bytes = new Uint8Array(binaryString.length);
                    for (let i = 0; i < binaryString.length; i++) {
                        bytes[i] = binaryString.charCodeAt(i);
                    }
                    return new TextDecoder('utf-8').decode(bytes);
                } else {
                    // é™çº§åˆ°ä¼ ç»Ÿæ–¹æ³•ï¼Œä½†ä½¿ç”¨æ›´å®‰å…¨çš„æ–¹å¼
                    try {
                        return decodeURIComponent(escape(binaryString));
                    } catch (e) {
                        // å¦‚æœescapeæ–¹æ³•å¤±è´¥ï¼Œå°è¯•ç›´æ¥è¿”å›äºŒè¿›åˆ¶å­—ç¬¦ä¸²
                        return binaryString;
                    }
                }
            } catch (e) {
                throw new Error('Base64è§£ç å¤±è´¥: ' + e.message);
            }
        }

        // å®‰å…¨çš„ä¸­æ–‡Base64ç¼–ç å‡½æ•°
        function safeBase64Encode(str) {
            try {
                // å°è¯•ä½¿ç”¨TextEncoderç¼–ç ï¼ˆæ”¯æŒUTF-8ï¼‰
                if (typeof TextEncoder !== 'undefined') {
                    const encoder = new TextEncoder();
                    const bytes = encoder.encode(str);
                    let binaryString = '';
                    for (let i = 0; i < bytes.length; i++) {
                        binaryString += String.fromCharCode(bytes[i]);
                    }
                    return btoa(binaryString);
                } else {
                    // é™çº§åˆ°ä¼ ç»Ÿæ–¹æ³•
                    return btoa(unescape(encodeURIComponent(str)));
                }
            } catch (e) {
                throw new Error('Base64ç¼–ç å¤±è´¥: ' + e.message);
            }
        }

        // æ ¹æ®ä½ç½®è®¾ç½®æ’å…¥å­—ç¬¦ä¸² - å®ç°è‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸²åŠŸèƒ½çš„æ ¸å¿ƒé€»è¾‘
        function insertStringAtPosition(text, insertString, position) {
            if (!insertString) return text;

            switch (position) {
                case 'start':
                    // åœ¨å¼€å¤´æ·»åŠ 
                    return insertString + text;
                case 'end':
                    // åœ¨ç»“å°¾æ·»åŠ 
                    return text + insertString;
                case 'random':
                    // åœ¨éšæœºä½ç½®æ·»åŠ 
                    const randomPos = Math.floor(Math.random() * (text.length + 1));
                    return text.slice(0, randomPos) + insertString + text.slice(randomPos);
                case 'random-edge':
                    // éšæœºåœ¨å¼€å¤´æˆ–ç»“å°¾æ·»åŠ 
                    return Math.random() < 0.5 ? insertString + text : text + insertString;
                default:
                    return text;
            }
        }

        // ä»æ–‡æœ¬ä¸­ç§»é™¤æŒ‡å®šå­—ç¬¦ä¸² - è§£ç æ—¶ç§»é™¤è‡ªåŠ¨æ·»åŠ çš„å­—ç¬¦ä¸²
        function removeInsertedString(text, insertString) {
            if (!insertString) return text;

            // ç§»é™¤æ‰€æœ‰å‡ºç°çš„æ’å…¥å­—ç¬¦ä¸²ï¼ˆæ”¯æŒå¤šæ¬¡å‡ºç°çš„æƒ…å†µï¼‰
            return text.replace(new RegExp(escapeRegExp(insertString), 'g'), '');
        }

        // è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦ - ç¡®ä¿å­—ç¬¦ä¸²èƒ½æ­£ç¡®ç”¨äºæ­£åˆ™è¡¨è¾¾å¼
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // å¤šæ¬¡ç¼–ç åŠŸèƒ½ - æ ¹æ®è®¾ç½®çš„ç¼–ç æ¬¡æ•°è¿›è¡Œå¤šæ¬¡Base64ç¼–ç 
        function multipleEncode(text, times) {
            let result = text;
            for (let i = 0; i < times; i++) {
                result = safeBase64Encode(result);
            }
            return result;
        }

        // å¤šæ¬¡è§£ç åŠŸèƒ½ - å°è¯•å¤šæ¬¡Base64è§£ç ç›´åˆ°å¾—åˆ°å¯è¯»æ–‡æœ¬
        function multipleDecode(text) {
            let result = text;
            let decodeCount = 0;
            const maxAttempts = settings.encodeCount || 10; // æœ€å¤§å°è¯•æ¬¡æ•°

            while (decodeCount < maxAttempts) {
                try {
                    const decoded = safeBase64Decode(result);
                    decodeCount++;

                    // æ£€æŸ¥è§£ç ç»“æœæ˜¯å¦ä»ç„¶æ˜¯Base64æ ¼å¼
                    if (isBase64(decoded) && decodeCount < maxAttempts) {
                        result = decoded;
                    } else {
                        // ä¸æ˜¯Base64æ ¼å¼æˆ–è¾¾åˆ°æœ€å¤§æ¬¡æ•°ï¼Œè¿”å›å½“å‰ç»“æœ
                        return { result: decoded, decodeTimes: decodeCount };
                    }
                } catch (e) {
                    // è§£ç å¤±è´¥ï¼Œè¿”å›ä¸Šä¸€æ¬¡çš„ç»“æœ
                    break;
                }
            }

            return { result: result, decodeTimes: decodeCount };
        }

        // ç‹¬ç«‹çš„æœ¬åœ°å­˜å‚¨ä¿å­˜å‡½æ•° - é¿å…ä¸åŸæœ‰ä¿å­˜å‡½æ•°å†²çª
        function saveSettingsToStorage() {
            localStorage.setItem('base64Settings', JSON.stringify(settings));
        }

        // è‡ªåŠ¨å¤åˆ¶åŠŸèƒ½ - å½“å¼€å¯è‡ªåŠ¨å¤åˆ¶æ—¶ï¼Œè‡ªåŠ¨å¤åˆ¶ç»“æœåˆ°å‰ªè´´æ¿
        function autoCopyToClipboard(text) {
            if (!settings.autoCopyResult) return;

            try {
                // ä¿å­˜å½“å‰ç„¦ç‚¹å…ƒç´ ï¼Œé˜²æ­¢å¤åˆ¶æ“ä½œå¯¼è‡´ç„¦ç‚¹ä¸¢å¤±
                const activeElement = document.activeElement;

                // ä½¿ç”¨ç°ä»£çš„Clipboard APIï¼ˆå¦‚æœæ”¯æŒï¼‰
                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(text).then(() => {
                        showAlert('ç»“æœå·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
                    }).catch(() => {
                        // é™çº§åˆ°ä¼ ç»Ÿæ–¹æ³•
                        fallbackCopyToClipboard(text, activeElement);
                    });
                } else {
                    // é™çº§åˆ°ä¼ ç»Ÿæ–¹æ³•
                    fallbackCopyToClipboard(text, activeElement);
                }
            } catch (e) {
                console.error('è‡ªåŠ¨å¤åˆ¶å¤±è´¥:', e);
            }
        }

        // ä¼ ç»Ÿå¤åˆ¶æ–¹æ³•çš„é™çº§å‡½æ•° - åœ¨ä¸æ”¯æŒç°ä»£APIæ—¶ä½¿ç”¨
        function fallbackCopyToClipboard(text, activeElement) {
            try {
                // åˆ›å»ºä¸´æ—¶textareaå…ƒç´ è¿›è¡Œå¤åˆ¶
                const tempElement = document.createElement('textarea');
                tempElement.value = text;
                tempElement.style.position = 'fixed';
                tempElement.style.left = '-9999px';
                tempElement.style.top = '-9999px';
                document.body.appendChild(tempElement);

                // æ‰§è¡Œå¤åˆ¶æ“ä½œ
                tempElement.select();
                tempElement.setSelectionRange(0, 99999);
                document.execCommand('copy');
                document.body.removeChild(tempElement);

                // æ¢å¤ç„¦ç‚¹åˆ°åŸæ¥çš„å…ƒç´ 
                if (activeElement && activeElement.focus) {
                    activeElement.focus();
                }

                // æ˜¾ç¤ºè‡ªåŠ¨å¤åˆ¶æç¤º
                showAlert('ç»“æœå·²è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
            } catch (e) {
                console.error('ä¼ ç»Ÿå¤åˆ¶æ–¹æ³•å¤±è´¥:', e);
            }
        }

        // è‡ªåŠ¨ç¼–ç ï¼ˆä¸æ˜¾ç¤ºæç¤ºï¼‰- æ”¯æŒè‡ªåŠ¨æ·»åŠ å­—ç¬¦ä¸²å’Œå¤šæ¬¡ç¼–ç 
        function autoEncode() {
            let text = $('#inputText').val();
            if (!text.trim()) return;

            try {
                // ç¬¬ä¸€æ­¥ï¼šæ·»åŠ è‡ªå®šä¹‰å­—ç¬¦ä¸²ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰
                if (settings.autoAddString) {
                    text = insertStringAtPosition(text, settings.autoAddString, settings.addPosition);
                }

                // ç¬¬äºŒæ­¥ï¼šå¦‚æœæœ‰æ’å…¥å­—ç¬¦ä¸”å¯ç”¨äº†éšæœºæ’å…¥ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
                if ($('#insertChar').val() && settings.insertRandomChar) {
                    text = insertRandomChar(text, $('#insertChar').val());
                }

                // ç¬¬ä¸‰æ­¥ï¼šè¿›è¡Œå¤šæ¬¡ç¼–ç 
                const encoded = multipleEncode(text, settings.encodeCount);
                $('#outputText').val(encoded);
                updateButtonStates('encode');

                // ç¬¬å››æ­¥ï¼šè‡ªåŠ¨å¤åˆ¶ç»“æœï¼ˆå¦‚æœå¼€å¯ï¼‰
                autoCopyToClipboard(encoded);
            } catch (e) {
                console.log('è‡ªåŠ¨ç¼–ç å¤±è´¥:', e.message);
                // è‡ªåŠ¨ç¼–ç å¤±è´¥æ—¶ä¸æ˜¾ç¤ºé”™è¯¯
            }
        }

        // è‡ªåŠ¨è§£ç ï¼ˆä¸æ˜¾ç¤ºæç¤ºï¼‰- æ”¯æŒå¤šæ¬¡è§£ç å’Œè‡ªåŠ¨ç§»é™¤å­—ç¬¦ä¸²
        function autoDecode() {
            let text = $('#inputText').val();
            if (!text.trim()) return;

            try {
                // ç¬¬ä¸€æ­¥ï¼šè¿›è¡Œå¤šæ¬¡è§£ç ï¼Œè·å–è§£ç ç»“æœå’Œè§£ç æ¬¡æ•°
                const decodeResult = multipleDecode(text);
                let decoded = decodeResult.result;

                // ç¬¬äºŒæ­¥ï¼šç§»é™¤è‡ªå®šä¹‰æ·»åŠ çš„å­—ç¬¦ä¸²ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰
                if (settings.autoAddString) {
                    decoded = removeInsertedString(decoded, settings.autoAddString);
                }

                // ç¬¬ä¸‰æ­¥ï¼šå¦‚æœæœ‰æ’å…¥å­—ç¬¦ä¸”å¯ç”¨äº†éšæœºæ’å…¥ï¼Œç§»é™¤æ’å…¥çš„å­—ç¬¦ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
                if ($('#insertChar').val() && settings.insertRandomChar) {
                    decoded = removeInsertedChar(decoded, $('#insertChar').val());
                }

                $('#outputText').val(decoded);
                updateButtonStates('decode');

                // ç¬¬å››æ­¥ï¼šè‡ªåŠ¨å¤åˆ¶ç»“æœï¼ˆå¦‚æœå¼€å¯ï¼‰
                autoCopyToClipboard(decoded);
            } catch (e) {
                console.log('è‡ªåŠ¨è§£ç å¤±è´¥:', e.message);
                // è‡ªåŠ¨è§£ç å¤±è´¥æ—¶ä¸æ˜¾ç¤ºé”™è¯¯
            }
        }

        // Base64ç¼–ç åŠŸèƒ½ - æ‰‹åŠ¨ç¼–ç ï¼Œæ”¯æŒæ‰€æœ‰æ–°åŠŸèƒ½
        function encodeText() {
            let text = $('#inputText').val();
            if (!text.trim()) {
                showAlert('è¯·è¾“å…¥è¦ç¼–ç çš„å†…å®¹ã€‚', 'warning');
                return;
            }

            try {
                // ç¬¬ä¸€æ­¥ï¼šæ·»åŠ è‡ªå®šä¹‰å­—ç¬¦ä¸²ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰
                if (settings.autoAddString) {
                    text = insertStringAtPosition(text, settings.autoAddString, settings.addPosition);
                }

                // ç¬¬äºŒæ­¥ï¼šå¦‚æœæœ‰æ’å…¥å­—ç¬¦ä¸”å¯ç”¨äº†éšæœºæ’å…¥ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
                if ($('#insertChar').val() && settings.insertRandomChar) {
                    text = insertRandomChar(text, $('#insertChar').val());
                }

                // ç¬¬ä¸‰æ­¥ï¼šè¿›è¡Œå¤šæ¬¡ç¼–ç 
                const encoded = multipleEncode(text, settings.encodeCount);
                $('#outputText').val(encoded);

                // æ˜¾ç¤ºæˆåŠŸæç¤ºï¼ŒåŒ…å«ç¼–ç æ¬¡æ•°ä¿¡æ¯
                const message = settings.encodeCount > 1 ?
                    `ç¼–ç æˆåŠŸï¼ï¼ˆ${settings.encodeCount}æ¬¡ç¼–ç ï¼‰` : 'ç¼–ç æˆåŠŸï¼';
                showAlert(message, 'success');
                updateButtonStates('encode');

                // ç¬¬å››æ­¥ï¼šè‡ªåŠ¨å¤åˆ¶ç»“æœï¼ˆå¦‚æœå¼€å¯ï¼‰
                autoCopyToClipboard(encoded);
            } catch (e) {
                showAlert('ç¼–ç å¤±è´¥ï¼š' + e.message, 'danger');
            }
        }

        // Base64è§£ç åŠŸèƒ½ - æ‰‹åŠ¨è§£ç ï¼Œæ”¯æŒæ‰€æœ‰æ–°åŠŸèƒ½
        function decodeText() {
            let text = $('#inputText').val();
            if (!text.trim()) {
                showAlert('è¯·è¾“å…¥è¦è§£ç çš„å†…å®¹ã€‚', 'warning');
                return;
            }

            try {
                // ç¬¬ä¸€æ­¥ï¼šè¿›è¡Œå¤šæ¬¡è§£ç ï¼Œè·å–è§£ç ç»“æœå’Œè§£ç æ¬¡æ•°
                const decodeResult = multipleDecode(text);
                let decoded = decodeResult.result;

                // ç¬¬äºŒæ­¥ï¼šç§»é™¤è‡ªå®šä¹‰æ·»åŠ çš„å­—ç¬¦ä¸²ï¼ˆå¦‚æœè®¾ç½®äº†ï¼‰
                if (settings.autoAddString) {
                    decoded = removeInsertedString(decoded, settings.autoAddString);
                }

                // ç¬¬ä¸‰æ­¥ï¼šå¦‚æœæœ‰æ’å…¥å­—ç¬¦ä¸”å¯ç”¨äº†éšæœºæ’å…¥ï¼Œç§»é™¤æ’å…¥çš„å­—ç¬¦ï¼ˆä¿æŒå‘åå…¼å®¹ï¼‰
                if ($('#insertChar').val() && settings.insertRandomChar) {
                    decoded = removeInsertedChar(decoded, $('#insertChar').val());
                }

                $('#outputText').val(decoded);

                // æ˜¾ç¤ºæˆåŠŸæç¤ºï¼ŒåŒ…å«è§£ç æ¬¡æ•°ä¿¡æ¯
                const message = decodeResult.decodeTimes > 1 ?
                    `è§£ç æˆåŠŸï¼ï¼ˆ${decodeResult.decodeTimes}æ¬¡è§£ç ï¼‰` : 'è§£ç æˆåŠŸï¼';
                showAlert(message, 'success');
                updateButtonStates('decode');

                // ç¬¬å››æ­¥ï¼šè‡ªåŠ¨å¤åˆ¶ç»“æœï¼ˆå¦‚æœå¼€å¯ï¼‰
                autoCopyToClipboard(decoded);
            } catch (e) {
                showAlert('è§£ç å¤±è´¥ï¼šè¯·æ£€æŸ¥è¾“å…¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„Base64ç¼–ç ã€‚', 'danger');
            }
        }

        // éšæœºæ’å…¥å­—ç¬¦
        function insertRandomChar(text, char) {
            const chars = text.split('');
            const insertPosition = Math.floor(Math.random() * (chars.length + 1));
            chars.splice(insertPosition, 0, char);
            return chars.join('');
        }

        // ç§»é™¤æ’å…¥çš„å­—ç¬¦
        function removeInsertedChar(text, char) {
            return text.replace(new RegExp(char, 'g'), '');
        }

        // äº¤æ¢æ–‡æœ¬å†…å®¹åŠŸèƒ½ - å°†è¾“å…¥æ¡†å’Œè¾“å‡ºæ¡†çš„å†…å®¹è¿›è¡Œäº¤æ¢
        function swapText() {
            console.log('äº¤æ¢å‡½æ•°è¢«è°ƒç”¨');
            // è®¾ç½®äº¤æ¢è§¦å‘æ ‡å¿—ä¸ºtrueï¼Œé˜²æ­¢è‡ªåŠ¨æ£€æµ‹åŠŸèƒ½åœ¨äº¤æ¢æ—¶è§¦å‘ç¼–ç /è§£ç 
            // å¿…é¡»åœ¨è·å–å€¼ä¹‹å‰è®¾ç½®ï¼Œç¡®ä¿æ•´ä¸ªäº¤æ¢è¿‡ç¨‹ä¸è¢«å¹²æ‰°
            isSwapTriggered = true;

            // ä½¿ç”¨jQueryè·å–å½“å‰ä¸¤ä¸ªæ–‡æœ¬æ¡†çš„å†…å®¹
            const inputText = $('#inputText').val();
            const outputText = $('#outputText').val();

            console.log('äº¤æ¢å‰ - è¾“å…¥æ¡†:', inputText);
            console.log('äº¤æ¢å‰ - è¾“å‡ºæ¡†:', outputText);

            // ä¸´æ—¶ç¦ç”¨æ‰€æœ‰è‡ªåŠ¨å¤„ç†äº‹ä»¶ï¼Œç¡®ä¿äº¤æ¢è¿‡ç¨‹ä¸è¢«æ‰“æ–­
            const originalAutoDetect = settings.autoDetect;
            settings.autoDetect = false;

            // æ‰§è¡Œå†…å®¹äº¤æ¢ï¼šå°†è¾“å‡ºæ¡†å†…å®¹æ”¾å…¥è¾“å…¥æ¡†ï¼Œå°†è¾“å…¥æ¡†å†…å®¹æ”¾å…¥è¾“å‡ºæ¡†
            $('#inputText').val(outputText);
            $('#outputText').val(inputText);

            console.log('äº¤æ¢å - è¾“å…¥æ¡†:', $('#inputText').val());
            console.log('äº¤æ¢å - è¾“å‡ºæ¡†:', $('#outputText').val());

            // æ¢å¤è‡ªåŠ¨æ£€æµ‹è®¾ç½®å¹¶é‡ç½®äº¤æ¢æ ‡å¿—
            setTimeout(() => {
                settings.autoDetect = originalAutoDetect;
                isSwapTriggered = false;
            }, 50);

            // æ˜¾ç¤ºæ“ä½œæˆåŠŸæç¤ºä¿¡æ¯
            showAlert('å†…å®¹å·²äº¤æ¢ã€‚', 'info');
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿ - æ‰‹åŠ¨å¤åˆ¶åŠŸèƒ½ï¼Œä¿æŒåŸæœ‰ç„¦ç‚¹
        function copyToClipboard(elementId) {
            try {
                const element = $('#' + elementId)[0];
                const text = element.value;

                // ä¿å­˜å½“å‰ç„¦ç‚¹å…ƒç´ 
                const activeElement = document.activeElement;

                // ä½¿ç”¨ç°ä»£çš„Clipboard APIï¼ˆå¦‚æœæ”¯æŒï¼‰
                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(text).then(() => {
                        showAlert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
                    }).catch(() => {
                        // é™çº§åˆ°ä¼ ç»Ÿæ–¹æ³•
                        fallbackManualCopy(element, activeElement);
                    });
                } else {
                    // é™çº§åˆ°ä¼ ç»Ÿæ–¹æ³•
                    fallbackManualCopy(element, activeElement);
                }
            } catch (e) {
                console.error('å¤åˆ¶å¤±è´¥:', e);
                showAlert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶ã€‚', 'danger');
            }
        }

        // ä¼ ç»Ÿæ‰‹åŠ¨å¤åˆ¶æ–¹æ³•çš„é™çº§å‡½æ•°
        function fallbackManualCopy(element, activeElement) {
            try {
                element.select();
                element.setSelectionRange(0, 99999); // å…¼å®¹ç§»åŠ¨ç«¯
                document.execCommand('copy');

                // æ¢å¤åŸæ¥çš„ç„¦ç‚¹ï¼ˆå¦‚æœåŸæ¥å°±åœ¨æŸä¸ªè¾“å…¥æ¡†ä¸­ï¼‰
                if (activeElement && activeElement !== element && activeElement.focus) {
                    setTimeout(() => {
                        activeElement.focus();
                    }, 100);
                }

                showAlert('å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'success');
            } catch (e) {
                console.error('ä¼ ç»Ÿå¤åˆ¶æ–¹æ³•å¤±è´¥:', e);
                showAlert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶ã€‚', 'danger');
            }
        }

        // æ¸…ç©ºæ–‡æœ¬
        function clearText(elementId) {
            $('#' + elementId).val('');
            if (elementId === 'inputText') {
                clearOutput();
            }
            showAlert('å†…å®¹å·²æ¸…ç©ºã€‚', 'info');
        }

        // æ¸…ç©ºè¾“å‡º
        function clearOutput() {
            $('#outputText').val('');
        }

        // æ›´æ–°æŒ‰é’®çŠ¶æ€
        function updateButtonStates(action) {
            if (action === 'encode') {
                $('.encode-btn').removeClass('btn-light').addClass('btn-primary');
                $('.decode-btn').removeClass('btn-primary').addClass('btn-light');
            } else if (action === 'decode') {
                $('.decode-btn').removeClass('btn-light').addClass('btn-primary');
                $('.encode-btn').removeClass('btn-primary').addClass('btn-light');
            }
        }

        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
        function showAlert(message, type = 'info') {
            $('#alertMessage')
                .removeClass()
                .addClass(`alert alert-${type}`)
                .text(message)
                .show();

            // 3ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                $('#alertMessage').hide();
            }, 10000);
        }

        // ä¿å­˜è®¾ç½® - åŒ…å«æ‰€æœ‰æ–°çš„å¸¸ç”¨æ“ä½œè®¾ç½®
        function saveSettings() {
            // åŸæœ‰è®¾ç½®é¡¹
            settings.autoEncode = $('#autoEncode').is(':checked');
            settings.autoDetect = $('#autoDetect').is(':checked');
            settings.insertRandomChar = $('#insertRandomChar').is(':checked');
            settings.showLineNumbers = $('#showLineNumbers').is(':checked');
            settings.wordWrap = $('#wordWrap').is(':checked');
            settings.enableNotifications = $('#enableNotifications').is(':checked');
            settings.enableSound = $('#enableSound').is(':checked');
            settings.fontSize = $('#fontSize').val();

            // æ–°å¢çš„å¸¸ç”¨æ“ä½œè®¾ç½®é¡¹
            settings.autoAddString = $('#modalAutoAddString').val() || $('#autoAddString').val();
            settings.addPosition = $('#modalAddPosition').val() || settings.addPosition;
            settings.encodeCount = parseInt($('#modalEncodeCount').val()) || parseInt($('#encodeCount').val()) || 1;
            settings.autoCopyResult = $('#modalAutoCopyResult').is(':checked');
            settings.autoDetectSwitch = $('#modalAutoDetectSwitch').is(':checked');

            // ç¡®ä¿ç¼–ç æ¬¡æ•°åœ¨æœ‰æ•ˆèŒƒå›´å†…
            if (settings.encodeCount < 1 || settings.encodeCount > 10) {
                settings.encodeCount = 1;
            }

            localStorage.setItem('base64Settings', JSON.stringify(settings));
            showAlert('è®¾ç½®å·²ä¿å­˜ï¼', 'success');

            // åº”ç”¨è®¾ç½®åˆ°ç•Œé¢
            applySettings();
            syncSettingsToUI();

            // å…³é—­è®¾ç½®æ¨¡æ€æ¡†
            const settingsModal = document.getElementById('settingsModal');
            const modal = bootstrap.Modal.getInstance(settingsModal);
            if (modal) {
                modal.hide();
            } else {
                // å¦‚æœæ²¡æœ‰å®ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¹¶ç«‹å³å…³é—­
                const newModal = new bootstrap.Modal(settingsModal);
                newModal.hide();
            }
        }

        // åŠ è½½è®¾ç½® - åŠ è½½æ‰€æœ‰è®¾ç½®é¡¹åŒ…æ‹¬æ–°çš„å¸¸ç”¨æ“ä½œè®¾ç½®
        function loadSettings() {
            const savedSettings = localStorage.getItem('base64Settings');
            if (savedSettings) {
                const loaded = JSON.parse(savedSettings);
                // åˆå¹¶è®¾ç½®ï¼Œç¡®ä¿æ–°å­—æ®µæœ‰é»˜è®¤å€¼
                settings = { ...settings, ...loaded };
            }

            // åº”ç”¨åŸæœ‰è®¾ç½®åˆ°UI
            $('#autoEncode').prop('checked', settings.autoEncode);
            $('#autoDetect').prop('checked', settings.autoDetect);
            $('#insertRandomChar').prop('checked', settings.insertRandomChar);
            $('#showLineNumbers').prop('checked', settings.showLineNumbers);
            $('#wordWrap').prop('checked', settings.wordWrap);
            $('#enableNotifications').prop('checked', settings.enableNotifications);
            $('#enableSound').prop('checked', settings.enableSound);
            $('#fontSize').val(settings.fontSize);

            // åº”ç”¨è®¾ç½®
            applySettings();
            syncSettingsToUI();
        }

        // åŒæ­¥è®¾ç½®åˆ°UIç•Œé¢ - ç¡®ä¿ä¸»ç•Œé¢å’Œè®¾ç½®å¼¹æ¡†æ˜¾ç¤ºä¸€è‡´çš„è®¾ç½®å€¼
        function syncSettingsToUI() {
            // åŒæ­¥å¸¸ç”¨æ“ä½œè®¾ç½®åˆ°ä¸»ç•Œé¢
            $('#autoAddString').val(settings.autoAddString);
            $('#encodeCount').val(settings.encodeCount);
            $('#autoCopyResult').prop('checked', settings.autoCopyResult);
            $('#autoDetectSwitch').prop('checked', settings.autoDetectSwitch);
            $('#addStringCount').text(settings.autoAddString.length);

            // æ›´æ–°ä½ç½®æ˜¾ç¤º
            const positionTexts = {
                'random': 'éšæœºä½ç½®',
                'start': 'åœ¨å¼€å¤´æ·»åŠ ',
                'end': 'åœ¨ç»“å°¾æ·»åŠ ',
                'random-edge': 'éšæœºåœ¨å¼€å¤´æˆ–ç»“å°¾'
            };
            $('#currentPosition').text(positionTexts[settings.addPosition] || 'éšæœºä½ç½®');

            // åŒæ­¥å¸¸ç”¨æ“ä½œè®¾ç½®åˆ°è®¾ç½®å¼¹æ¡†
            $('#modalAutoAddString').val(settings.autoAddString);
            $('#modalAddPosition').val(settings.addPosition);
            $('#modalEncodeCount').val(settings.encodeCount);
            $('#modalAutoCopyResult').prop('checked', settings.autoCopyResult);
            $('#modalAutoDetectSwitch').prop('checked', settings.autoDetectSwitch);

            // åŒæ­¥è‡ªåŠ¨ç¼–è§£ç è®¾ç½®ï¼ˆæ–°æ—§è®¾ç½®ä¿æŒä¸€è‡´ï¼‰
            $('#autoDetect').prop('checked', settings.autoDetectSwitch);
        }

        // åº”ç”¨è®¾ç½®
        function applySettings() {
            // åº”ç”¨å­—ä½“å¤§å°
            applyFontSize();

            // å¼ºåˆ¶åº”ç”¨è‡ªåŠ¨æ¢è¡Œè®¾ç½®
            $('textarea.code-input').css({
                'white-space': 'pre-wrap',
                'word-wrap': 'break-word',
                'word-break': 'break-all',
                'overflow-wrap': 'break-word'
            });

            // åº”ç”¨è¡Œå·æ˜¾ç¤ºï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰
            if (settings.showLineNumbers) {
                // è¿™é‡Œå¯ä»¥æ·»åŠ è¡Œå·æ˜¾ç¤ºçš„é€»è¾‘
            }
        }

        // åº”ç”¨å­—ä½“å¤§å°
        function applyFontSize() {
            // è®¾ç½®æœ€å°å­—ä½“å¤§å°ä¸º10pxï¼Œæœ€å¤§ä¸º20px
            const fontSize = Math.max(10, Math.min(20, parseInt(settings.fontSize)));
            $('textarea').css('font-size', fontSize + 'px');
        }

        // æ¸…ç©ºæ‰€æœ‰å†…å®¹
        function clearAll() {
            $('#inputText').val('');
            $('#outputText').val('');
            showAlert('æ‰€æœ‰å†…å®¹å·²æ¸…ç©ºã€‚', 'info');
        }

        // è¯­è¨€åˆ‡æ¢åŠŸèƒ½
        function switchLanguage(lang, langName, flag) {
            // æ›´æ–°æŒ‰é’®æ˜¾ç¤º
            $('.dropdown-toggle').html(`${flag} ${langName}`);

            // ä¿å­˜è¯­è¨€é€‰æ‹©
            localStorage.setItem('selectedLanguage', JSON.stringify({
                lang: lang,
                name: langName,
                flag: flag
            }));
        }

        // æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒ
        $(document).on('keydown', function (e) {
            // Ctrl+Enter ç¼–ç 
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                encodeText();
            }
            // Ctrl+Shift+Enter è§£ç 
            if (e.ctrlKey && e.shiftKey && e.key === 'Enter') {
                e.preventDefault();
                decodeText();
            }
            // Ctrl+S äº¤æ¢
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                swapText();
            }
            // Ctrl+L æ¸…ç©º
            if (e.ctrlKey && e.key === 'l') {
                e.preventDefault();
                clearAll();
            }
        });

        // æ¸…ç©ºæ‰€æœ‰å†…å®¹
        function clearAll() {
            $('#inputText').val('');
            $('#outputText').val('');
            $('#insertChar').val('');
            updateCharCount();
            showAlert('æ‰€æœ‰å†…å®¹å·²æ¸…ç©ºã€‚', 'info');
        }

        // å¢å¼ºçš„Base64æ£€æµ‹å‡½æ•°
        function isBase64(str) {
            if (str === '' || str.trim() === '') {
                return false;
            }

            try {
                // æ£€æŸ¥æ˜¯å¦åªåŒ…å«Base64å­—ç¬¦
                const base64Regex = /^[A-Za-z0-9+/]*={0,2}$/;
                if (!base64Regex.test(str)) {
                    return false;
                }

                // å°è¯•è§£ç 
                const decoded = atob(str);
                // æ£€æŸ¥è§£ç ç»“æœæ˜¯å¦æœ‰æ•ˆ
                return btoa(decoded) === str;
            } catch (err) {
                return false;
            }
        }

        // å¢å¼ºçš„å¯è¯»æ–‡æœ¬æ£€æµ‹
        function isReadableText(str) {
            if (!str || str.length === 0) return false;

            // æ£€æŸ¥æ˜¯å¦åŒ…å«å¯è¯»å­—ç¬¦ï¼ˆåŒ…æ‹¬ä¸­æ–‡ï¼‰
            const readableChars = str.match(/[a-zA-Z0-9\u4e00-\u9fa5\s.,!?;:'"()[\]{}]/g);
            const readableRatio = readableChars ? readableChars.length / str.length : 0;

            // å¦‚æœå¯è¯»å­—ç¬¦æ¯”ä¾‹è¶…è¿‡50%ï¼Œè®¤ä¸ºæ˜¯å¯è¯»æ–‡æœ¬
            return readableRatio > 0.5;
        }
    </script>
</body>

<style>
    html,
    body {
        background: rgb(245 246 255);
        min-width: 100%;
        min-height: 100%;
        margin: 0;
        padding: 0;
    }

    /* å¼ºåŒ–textareaæ ·å¼ï¼Œç¡®ä¿èƒ½å¤Ÿè°ƒæ•´å¤§å°å’Œè‡ªåŠ¨æ¢è¡Œ */
    .code-input {
        background: #fff !important;
        border-radius: 10px !important;
        box-shadow: 0 2px 8px 0 rgba(96, 114, 252, .05) !important;
        padding: 12px !important;
        min-height: 300px !important;
        height: 50vh;
        width: 100%;
        border: 1px solid #fff;
        resize: vertical !important;
        /* å¼ºåˆ¶è‡ªåŠ¨æ¢è¡Œè®¾ç½® */
        white-space: pre-wrap !important;
        word-wrap: break-word !important;
        word-break: break-all !important;
        overflow-wrap: break-word !important;
        /* ç¡®ä¿æœ‰æ»šåŠ¨æ¡ */
        overflow-y: auto !important;
    }


    /* é¼ æ ‡æ‚¬æµ®æ—¶çš„æç¤ºæ•ˆæœ */
    .code-input:hover {
        border-color: #86b7fe;
        box-shadow: 0 0 0 1px rgba(13, 110, 253, 0.1);
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    /* ç§»åŠ¨ç«¯å¸ƒå±€ä¼˜åŒ– - ä¸Šä¸‹æ’åˆ—å’ŒæŒ‰é’®ä½ç½®è°ƒæ•´ */
    @media (max-width: 768px) {

        /* ç¡®ä¿rowå®¹å™¨æ”¯æŒflexbox order */
        .textarea-container {
            display: flex !important;
            flex-direction: column !important;
        }

        /* ç§»åŠ¨ç«¯è¾“å…¥æ¡†ä¸Šä¸‹æ’åˆ— */
        .textarea-container .input-section,
        .textarea-container .output-section {
            flex: 0 0 100% !important;
            max-width: 100% !important;
            margin-bottom: 20px;
        }

        /* ç§»åŠ¨ç«¯è¾“å…¥æ¡†é«˜åº¦è°ƒæ•´ */
        .code-input {
            min-height: 200px !important;
            height: 30vh !important;
            background: #fff !important;
            border-radius: 10px !important;
            box-shadow: 0 2px 8px 0 rgba(96, 114, 252, .05) !important;
            border: 1px solid #fff !important;
        }

        /* ç§»åŠ¨ç«¯æ˜¾ç¤ºä¸­é—´æŒ‰é’®ï¼Œéšè—æ¡Œé¢æŒ‰é’® */
        .mobile-buttons {
            display: block !important;
            order: 2;
            /* ç¡®ä¿åœ¨è¾“å…¥æ¡†å’Œè¾“å‡ºæ¡†ä¹‹é—´ */
        }

        .desktop-buttons {
            display: none !important;
        }

        /* è°ƒæ•´è¾“å…¥æ¡†é¡ºåº */
        .input-section {
            order: 1;
        }

        .output-section {
            order: 3;
        }

        /* ç§»åŠ¨ç«¯æŒ‰é’®æ ·å¼ä¼˜åŒ– */
        .mobile-buttons .btn {
            font-size: 14px;
            padding: 10px 15px;
            margin: 0 5px;
        }

        /* ç§»åŠ¨ç«¯æŒ‰é’®å®¹å™¨æ ·å¼ */
        .mobile-buttons {
            padding: 15px 0;
            background: rgba(245, 246, 255, 0.5);
            border-radius: 10px;
            margin: 15px 0;
        }

        /* ç§»åŠ¨ç«¯è°ƒæ•´æ‰‹æŸ„æ›´æ˜æ˜¾ */
        .code-input::-webkit-resizer {
            background-size: 12px 12px;
        }

        /* ç§»åŠ¨ç«¯æ–‡æœ¬æ¡†è¾¹è·è°ƒæ•´ */
        .input-section,
        .output-section {
            margin-bottom: 0;
        }
    }

    /* æ¡Œé¢ç«¯éšè—ç§»åŠ¨ç«¯æŒ‰é’® */
    @media (min-width: 769px) {
        .mobile-buttons {
            display: none !important;
        }

        .desktop-buttons {
            display: block !important;
        }
    }

    div {
        box-sizing: border-box;
    }

    /* å¯¼èˆªæ ä¼˜åŒ– - ç¡®ä¿åœ¨å„ç§è®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœ */
    .navbar {
        box-shadow: 0 2px 4px rgba(0,0,0,.1);
        padding: 0.5rem 0;
    }

    .navbar-brand {
        font-weight: bold;
        font-size: 1.5rem;
    }

    /* ç§»åŠ¨ç«¯å¯¼èˆªæ ä¼˜åŒ– */
    @media (max-width: 991.98px) {
        .navbar-nav {
            text-align: center;
            padding: 1rem 0;
        }
        
        .navbar-nav .nav-link {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #f8f9fa;
        }
        
        .navbar-nav .nav-link:last-child {
            border-bottom: none;
        }
        
        .navbar-nav .dropdown-menu {
            border: none;
            box-shadow: none;
            background-color: #f8f9fa;
            margin-top: 0;
        }
        
        .navbar-nav .dropdown-item {
            text-align: center;
            padding: 0.5rem 1rem;
        }
        
        /* ç§»åŠ¨ç«¯å³ä¾§æŒ‰é’®ä¼˜åŒ– */
        .navbar .navbar-buttons {
            justify-content: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #dee2e6;
            width: 100%;
        }
        
        .navbar .navbar-buttons .btn {
            margin: 0 0.25rem;
            font-size: 0.875rem;
            min-width: 80px;
        }
        
        .navbar .navbar-buttons .dropdown-menu {
            min-width: 150px;
        }
        
        /* æ±‰å ¡èœå•æŒ‰é’®æ ·å¼ */
        .navbar-toggler {
            border: 1px solid #dee2e6;
            font-size: 1.25rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
        }
        
        .navbar-toggler:focus {
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
            border-color: #86b7fe;
        }
        
        .navbar-toggler:hover {
            background-color: rgba(0,0,0,.05);
        }
        
        /* ç§»åŠ¨ç«¯èœå•å±•å¼€åŠ¨ç”» */
        .navbar-collapse {
            transition: all 0.3s ease-in-out;
        }
        
        /* ç§»åŠ¨ç«¯å“ç‰Œlogoä¼˜åŒ– */
        .navbar-brand img {
            margin-right: 0.5rem;
        }
    }

    /* å¤§å±å¹•å¯¼èˆªæ ä¼˜åŒ– */
    @media (min-width: 992px) {
        .navbar-nav .nav-link {
            margin: 0 0.5rem;
            border-radius: 0.25rem;
            transition: background-color 0.3s ease;
        }
        
        .navbar-nav .nav-link:hover {
            background-color: rgba(0,0,0,.05);
        }
    }

    /* å¸¸ç”¨æ“ä½œåŒºåŸŸæ ·å¼ä¼˜åŒ– - ç¡®ä¿åœ¨å„ç§å±å¹•å°ºå¯¸ä¸‹éƒ½æœ‰è‰¯å¥½çš„æ˜¾ç¤ºæ•ˆæœ */
    .d-flex.flex-wrap.gap-3 {
        gap: 1rem !important;
        /* ç¡®ä¿å…ƒç´ é—´æœ‰é€‚å½“çš„é—´è· */
    }

    /* æç¤ºæ¡†æ ·å¼ä¼˜åŒ– - ç¡®ä¿tooltipåœ¨ç§»åŠ¨ç«¯ä¹Ÿèƒ½æ­£å¸¸æ˜¾ç¤º */
    .tooltip {
        font-size: 0.875rem;
        max-width: 250px;
    }

    /* è¡¨å•æ§ä»¶æ ·å¼ä¼˜åŒ– - ç»Ÿä¸€è¡¨å•å…ƒç´ çš„å¤–è§‚ */
    .form-control,
    .form-select {
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    .form-control:focus,
    .form-select:focus {
        border-color: #86b7fe;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }

    /* å¼€å…³æ ·å¼ä¼˜åŒ– - ä½¿å¼€å…³åœ¨ç§»åŠ¨ç«¯æ›´å®¹æ˜“ç‚¹å‡» */
    .form-check-input[type="checkbox"] {
        cursor: pointer;
    }

    /* å°æ ‡ç­¾æ ·å¼ - ç»Ÿä¸€å°æ ‡ç­¾çš„å¤–è§‚ */
    .form-label.small {
        font-weight: 500;
        color: #6c757d;
        margin-bottom: 0.25rem;
    }
</style>

</html>